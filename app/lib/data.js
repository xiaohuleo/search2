// app/lib/data.js

// 1. 原始文本保持不变（此处省略了你提供的长文本，实际使用时请完整保留你给出的 RAW_TEXT 内容）
const RAW_TEXT = `居民身份证住址变更换领，居民身份证损坏换领，居民身份证民族变更更正换领，居民身份证姓名变更换领，居民身份证到期换领，居民身份证遗失补领，码上监督码上办，政策通，个人中心-办事记录，个人中心-我的留言，人工总客服，视频预约，二级注册造价师证书，个体经营者，怀化二手房网签查询，怀化房源验真，怀化楼盘查询，怀化商品房网签查询，企业异常名录详细信息，企业养老，食品生产许可证，失业保险个人信息，烟草专卖批发企业许可证，一级注册建造师信息，严重违法失信企业名单，中华人民共和国二级建造师注册证书，中华人民共和国二级注册结构工程师注册执业，中华人民共和国二级注册建筑师注册证书，个人中心-办事记录，个人中心-我的留言，人工总客服，视频预约，省地质博物馆票务预约，食安包保督导问题整改，制定食安风险防控清单，食安企业防控问题整改，检查问题食安企业整改，食安日管控，食安人员管理，食安人员培训，食安企业索证索票，食安企业停工停产申请，食安企业调休时间配置，食安通知公告查询，食安消毒留样记录管理，食安月调度，预警信息管理，食安自检自查，食安周排查，食安责任人管理，食品企业信息报备，食品企业追溯拆码，食品企业产品入库，食品企业产品出库，食品企业产品库存，食品企业原料入库，食品企业证书申报，用户个人中心，入驻商户列表，放心消费地图，创业孵化与指导，会员风采展示，会员活动报名，协会组织架构，金融政策发布解读，人才就业招聘信息，会员能力提升培训，会员诉求反馈渠道，协会通知公告，会员问卷征集，协会工作要闻，协会联络方式，政策速递与解读，企业注册登记待办业务，企业注册登记业务进度查询，个体工商户年报填报`; 
// ... (请确保你的 RAW_TEXT 变量包含你完整的数据)

// 辅助函数：从名称中提取城市
function getCityFromName(name) {
  const cities = ["长沙", "株洲", "湘潭", "衡阳", "邵阳", "岳阳", "常德", "张家界", "益阳", "郴州", "永州", "怀化", "娄底", "湘西", "韶山", "宁乡", "浏阳", "澧县", "桃源", "安化", "平江", "汨罗", "湘阴", "临湘", "新化", "涟源", "冷水江", "双峰", "祁阳", "东安", "蓝山", "新田", "江华", "江永", "道县", "宁远", "慈利", "桑植", "石门", "汉寿", "安乡", "津市", "临澧", "桃江", "南县", "沅江", "赫山", "资阳", "桂阳", "宜章", "永兴", "嘉禾", "临武", "汝城", "桂东", "安仁", "北湖", "苏仙", "中方", "沅陵", "辰溪", "溆浦", "会同", "麻阳", "新晃", "芷江", "靖州", "通道", "洪江", "保靖", "永顺", "龙山", "花垣", "凤凰", "泸溪", "古丈"];
  for (let city of cities) {
    if (name.includes(city)) return city;
  }
  return "全省通用";
}

// 辅助函数：生成随机评分 8.0 - 10.0
function getRandomScore() {
  return (Math.random() * 2 + 8).toFixed(1);
}

// 辅助函数：生成随机搜索量 100 - 10000
function getRandomSearchVolume() {
  return Math.floor(Math.random() * 9900) + 100;
}

// 2. 增强的数据生成逻辑，模拟完整的数据库字段
export const DEFAULT_DATA = RAW_TEXT.split(/，|\n/)
  .map(s => s.trim())
  .filter(s => s.length > 0)
  .map((name, index) => {
    const isLegal = (name.includes("企业") || name.includes("法人") || name.includes("公司") || name.includes("经营") || name.includes("许可证"));
    const city = getCityFromName(name);
    
    return {
      "事项编码": `SV-${10000 + index}`,
      "事项名称": name,
      "事项简称": name.length > 8 ? name.substring(0, 8) + "..." : name,
      "状态": "正常",
      "申请人": isLegal ? "法人/非法人组织" : "自然人",
      "最新更新时间": new Date().toLocaleDateString(),
      "申请时间": "工作日 9:00-17:00",
      "所属应用": "政务APP",
      "事项描述": `这是关于${name}的具体办理事项，提供在线申请和查询服务。`,
      "事项分类": isLegal ? "准营准办" : "便民服务",
      "服务对象": isLegal ? "法人" : "自然人", // 核心匹配字段
      "自然人主题": isLegal ? "" : "户籍办理",
      "法人主题": isLegal ? "设立变更" : "",
      "所属市州单位": city, // 核心匹配字段
      "办理权限": "市级",
      "事项标签": isLegal ? "营商环境" : "民生保障",
      "是否高频事项": Math.random() > 0.8 ? "是" : "否", // 20%概率是高频
      "发布渠道": "移动端,PC端",
      "满意度": getRandomScore(), // 核心排序字段
      "搜索量": getRandomSearchVolume() // 核心排序字段
    };
  });
